# –û–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl+C –≤ Telegram Desktop

## üìã –ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥

**Telegram Desktop –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–∏–∫–∞–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ Ctrl+C.**

–û–ø–µ—Ä–∞—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ Qt –±–µ–∑ –∫–∞–∫–æ–π-–ª–∏–±–æ —Å–µ—Ç–µ–≤–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏.

---

## üîç –ì–¥–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è Ctrl+C

### –û—Å–Ω–æ–≤–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ

**–§–∞–π–ª:** `Telegram/lib_ui/ui/widgets/labels.cpp`
**–§—É–Ω–∫—Ü–∏—è:** `FlatLabel::keyPressEvent()`
**–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç—Ä–æ–∫–∞:** ~800+

```cpp
void FlatLabel::keyPressEvent(QKeyEvent *e) {
	e->ignore();
	if (e->key() == Qt::Key_Copy || (e->key() == Qt::Key_C && e->modifiers().testFlag(Qt::ControlModifier))) {
		if (!_selection.empty()) {
			copySelectedText();
			e->accept();
		}
#ifdef Q_OS_MAC
	} else if (e->key() == Qt::Key_E && e->modifiers().testFlag(Qt::ControlModifier)) {
		auto selection = _selection.empty() ? (_contextMenu ? _savedSelection : _selection) : _selection;
		if (!selection.empty()) {
			TextUtilities::SetClipboardText(_text.toTextForMimeData(selection), QClipboard::FindBuffer);
		}
#endif // Q_OS_MAC
	}
}
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Å—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:
- **Input fields** (–ø–æ–ª—è –≤–≤–æ–¥–∞) - –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É Qt
- **Message text** (—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏–π) - —á–µ—Ä–µ–∑ `FlatLabel` –∏ `Ui::Text::String`
- **Context menus** (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω—é) - –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `QGuiApplication::clipboard()->setText()`

---

## ‚öôÔ∏è –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç:
- `Qt::Key_Copy` (–Ω–∞—Ç–∏–≤–Ω–∞—è –∫–ª–∞–≤–∏—à–∞ Copy)
- –ò–õ–ò `Qt::Key_C` + `Qt::ControlModifier` (Ctrl+C)

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–¥–µ–ª–µ–Ω–∏—è

```cpp
if (!_selection.empty()) {
    copySelectedText();
    e->accept();
}
```

–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –≤—ã–¥–µ–ª–µ–Ω**.

### –®–∞–≥ 3: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞

```cpp
void FlatLabel::copySelectedText() {
	const auto selection = _selection.empty()
		? (_contextMenu ? _savedSelection : _selection)
		: _selection;
	if (!selection.empty()) {
		TextUtilities::SetClipboardText(_text.toTextForMimeData(selection));
	}
}
```

### –®–∞–≥ 4: –†–∞–±–æ—Ç–∞ —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –±—É—Ñ–µ—Ä–æ–º

**–§–∞–π–ª:** `Telegram/lib_ui/ui/text/text_utilities.cpp`

```cpp
void SetClipboardText(
	const TextForMimeData &textForMimeData,
	QClipboard::Mode mode = QClipboard::Clipboard) {

	if (auto data = TextUtilities::MimeDataFromText(textForMimeData)) {
		QGuiApplication::clipboard()->setMimeData(data.release(), mode);
	}
}
```

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Qt API:**
- `QGuiApplication::clipboard()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞
- `setMimeData()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±—É—Ñ–µ—Ä
- **–ù–∏–∫–∞–∫–∏—Ö —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤!**

---

## üåê –ê–Ω–∞–ª–∏–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –ü—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

–í—ã–ø–æ–ª–Ω–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ:

#### ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ
- –¢–µ–ª–µ–º–µ—Ç—Ä–∏—è (`Telemetry`, `Analytics`) - **0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (`trackEvent`, `reportEvent`, `sendMetric`) - **0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (`reportCopy`, `trackCopy`, `clipboardEvent`) - **0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**
- –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`UserAction`, `UsageEvent`, `EventReport`) - **0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è**
- –ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (`UsageMetrics`, `UserMetrics`) - **0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**

#### ‚úÖ –ù–∞–π–¥–µ–Ω–æ
- **–¢–æ–ª—å–∫–æ** –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±—É—Ñ–µ—Ä–æ–º –æ–±–º–µ–Ω–∞ —á–µ—Ä–µ–∑ Qt API
- –†–µ–ø–æ—Ä—Ç–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –¥–ª—è –∂–∞–ª–æ–± –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç (—Å–ø–∞–º, –Ω–∞—Ä—É—à–µ–Ω–∏—è –∞–≤—Ç–æ—Ä—Å–∫–∏—Ö –ø—Ä–∞–≤), –∞ –ù–ï –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### API –¥–ª—è —Ä–µ–ø–æ—Ä—Ç–∏–Ω–≥–∞ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)

–í –∫–æ–¥–µ –µ—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ –∂–∞–ª–æ–±:

```cpp
// –≠—Ç–æ –û–¢–ü–†–ê–í–õ–Ø–ï–¢–°–Ø –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–¥–ª—è –∂–∞–ª–æ–± –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç)
void Session::api().request(MTPaccount_ReportPeer(
	peer->input,
	MTP_inputReportReasonSpam(),
	MTP_string(comment)
)).send();
```

**–ù–û** –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–æ–±–Ω–æ–≥–æ –∫–æ–¥–∞ –ù–ï–¢.

### –í—ã–≤–æ–¥

**100% –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:** Telegram Desktop –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

---

## üíª –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Windows –∏ Linux

```cpp
if (e->key() == Qt::Key_Copy ||
    (e->key() == Qt::Key_C && e->modifiers().testFlag(Qt::ControlModifier))) {
    // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Ctrl+C
}
```

### macOS

```cpp
#ifdef Q_OS_MAC
} else if (e->key() == Qt::Key_E && e->modifiers().testFlag(Qt::ControlModifier)) {
	// Ctrl+E - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ FindBuffer (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è macOS)
	auto selection = _selection.empty()
		? (_contextMenu ? _savedSelection : _selection)
		: _selection;
	if (!selection.empty()) {
		TextUtilities::SetClipboardText(
			_text.toTextForMimeData(selection),
			QClipboard::FindBuffer  // ‚Üê –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä macOS
		);
	}
#endif
```

**macOS –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:**
- `Ctrl+E` - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ FindBuffer (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞)
- –†–∞–±–æ—Ç–∞–µ—Ç —Å `QClipboard::FindBuffer` –≤–º–µ—Å—Ç–æ `QClipboard::Clipboard`

**–ù–∏–∫–∞–∫–∏—Ö —Ä–∞–∑–ª–∏—á–∏–π –≤ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏ –Ω–µ—Ç** - –µ—ë –ø—Ä–æ—Å—Ç–æ –Ω–µ—Ç –Ω–∏–≥–¥–µ.

---

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é (–ø—Ä–∞–≤—ã–π –∫–ª–∏–∫)

```cpp
// –ü—Ä–∏–º–µ—Ä –∏–∑ –º–µ–Ω—é –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏
base::make_weak(controller.get()),
[text] {
	QGuiApplication::clipboard()->setText(text);
}
```

### 2. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–≤–∞–π—Ç-—Å—Å—ã–ª–æ–∫

```cpp
const auto link = _peer->session().createInternalLinkFull(username);
QGuiApplication::clipboard()->setText(link);
TextUtilities::SetClipboardText(
	TextForMimeData::Simple(link),
	QClipboard::Clipboard
);
```

### 3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤

–¢–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–µ API –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

**–û–±—â–∞—è —á–µ—Ä—Ç–∞:** –í—Å–µ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É –±—É—Ñ–µ—Ä—É –æ–±–º–µ–Ω–∞ —á–µ—Ä–µ–∑ Qt.

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

```
–ù–∞–∂–∞—Ç–∏–µ Ctrl+C
    ‚Üì
Qt Event System (QKeyEvent)
    ‚Üì
FlatLabel::keyPressEvent()
    ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞: Key_Copy || (Key_C + ControlModifier)?
    ‚Üì –î–∞
–ü—Ä–æ–≤–µ—Ä–∫–∞: _selection –Ω–µ –ø—É—Å—Ç–æ–π?
    ‚Üì –î–∞
copySelectedText()
    ‚Üì
TextUtilities::SetClipboardText()
    ‚Üì
QGuiApplication::clipboard()->setMimeData()
    ‚Üì
–°–∏—Å—Ç–µ–º–Ω—ã–π –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
    ‚Üì
–ö–û–ù–ï–¶ (–Ω–∏–∫–∞–∫–æ–π —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
```

---

## üîê –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?

‚úÖ **–ü–ª—é—Å—ã:**
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ–µ
- –ù–∏–∫–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ç–µ–∫—Å—Ç–µ –Ω–µ –ø–æ–∫–∏–¥–∞–µ—Ç –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- –ù–µ—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–µ—Ç tracking'–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞

‚ùå **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏ (–Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å Telegram):**
- –î—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ú–û–ì–£–¢ —á–∏—Ç–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –∞ –Ω–µ Telegram
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –û–° (macOS, iOS 14+) –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –±—É—Ñ–µ—Ä—É

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º–∏

Telegram Desktop –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ Qt/C++:
- –ù–µ—Ç –æ–±–ª–∞—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Å—Ç–µ–º)
- –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Qt –∫–ª–∞—Å—Å—ã

```cpp
#include <QtGui/QClipboard>
#include <QtGui/QGuiApplication>

// –û—Å–Ω–æ–≤–Ω–æ–π API
QClipboard *clipboard = QGuiApplication::clipboard();
clipboard->setText(text);                    // –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç
clipboard->setMimeData(mimeData, mode);      // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
```

### –†–µ–∂–∏–º—ã –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞

```cpp
enum QClipboard::Mode {
    Clipboard,    // –û—Å–Ω–æ–≤–Ω–æ–π –±—É—Ñ–µ—Ä (Ctrl+C/Ctrl+V)
    Selection,    // X11 selection (—Å—Ä–µ–¥–Ω—è—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏ –≤ Linux)
    FindBuffer    // macOS find buffer (Ctrl+E)
}
```

Telegram –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
- `Clipboard` - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (Windows/Linux/macOS)
- `FindBuffer` - –¥–ª—è macOS Ctrl+E

### –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

```cpp
TextForMimeData textForMimeData = {
    .rich = richText,      // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
    .expanded = expandedText  // –†–∞—Å–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç (—Å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏)
};

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ MIME data –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞
std::unique_ptr<QMimeData> MimeDataFromText(const TextForMimeData &text);
```

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã

1. **Telegram Desktop –Ω–µ —à–ø–∏–æ–Ω–∏—Ç –∑–∞ –≤–∞—à–∏–º–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏** - –Ω–∏–∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ Ctrl+C –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Qt API** - –ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ —Å–∫—Ä—ã—Ç—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤
3. **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è** - –¥–∞–Ω–Ω—ã–µ –∏–¥—É—Ç —Ç–æ–ª—å–∫–æ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
4. **–û—Ç–∫—Ä—ã—Ç—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥** - –ª—é–±–æ–π –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ

### –§–∞–π–ª—ã –¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

- `Telegram/lib_ui/ui/widgets/labels.cpp` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤ labels
- `Telegram/lib_ui/ui/text/text_utilities.cpp` - —É—Ç–∏–ª–∏—Ç—ã —Ä–∞–±–æ—Ç—ã —Å –±—É—Ñ–µ—Ä–æ–º –æ–±–º–µ–Ω–∞
- `Telegram/SourceFiles/ui/widgets/input_fields.cpp` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞

### –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

- ‚úÖ –ü–æ–ª–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ (Grep/Glob)
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π clipboard, copy, Ctrl+C
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ API –≤—ã–∑–æ–≤–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É
- ‚úÖ –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (Windows/Linux/macOS)

---

**–î–∞—Ç–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è:** 2025-10-25
**–í–µ—Ä—Å–∏—è –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã:** branch `system_info`, commit `aa6fc6a8b5`
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ - –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ–µ

